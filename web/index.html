<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; font-src 'self'; connect-src 'self' https://api.hetzner.cloud; base-uri 'self'; form-action 'self';">
    <title>Devbox</title>
    <link rel="stylesheet" href="src/style.css">
</head>
<body class="bg-background text-foreground min-h-screen">
    <!-- Skip to main content - WCAG AAA keyboard navigation -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Navigation -->
    <nav class="border-b-2 border-border bg-card sticky top-0 z-40" role="navigation" aria-label="Main navigation">
        <div class="max-w-4xl mx-auto px-4 h-16 flex items-center justify-between">
            <span class="text-xl font-bold">Devbox</span>
            <div class="flex items-center gap-1">
                <div class="flex gap-1" role="menubar">
                    <a href="#dashboard" class="nav-link min-h-[44px] min-w-[44px] px-4 py-2 rounded-md text-base font-medium text-muted-foreground hover:text-foreground hover:bg-muted transition-colors flex items-center" data-nav="dashboard" role="menuitem">Dashboard</a>
                    <a href="#config" class="nav-link min-h-[44px] min-w-[44px] px-4 py-2 rounded-md text-base font-medium text-muted-foreground hover:text-foreground hover:bg-muted transition-colors flex items-center" data-nav="config" role="menuitem">Global</a>
                    <a href="#profiles" class="nav-link min-h-[44px] min-w-[44px] px-4 py-2 rounded-md text-base font-medium text-muted-foreground hover:text-foreground hover:bg-muted transition-colors flex items-center" data-nav="profiles" role="menuitem">Profiles</a>
                    <a href="#cloudinit" class="nav-link min-h-[44px] min-w-[44px] px-4 py-2 rounded-md text-base font-medium text-muted-foreground hover:text-foreground hover:bg-muted transition-colors flex items-center" data-nav="cloudinit" role="menuitem">Cloud-Init</a>
                    <a href="#credentials" class="nav-link min-h-[44px] min-w-[44px] px-4 py-2 rounded-md text-base font-medium text-muted-foreground hover:text-foreground hover:bg-muted transition-colors flex items-center" data-nav="credentials" role="menuitem">Credentials</a>
                </div>
                <!-- Theme toggle -->
                <div class="relative ml-2">
                    <button
                        id="theme-toggle"
                        class="nav-link min-h-[44px] min-w-[44px] px-3 py-2 rounded-md text-base font-medium text-muted-foreground hover:text-foreground hover:bg-muted transition-colors flex items-center"
                        aria-label="Change color theme"
                        aria-haspopup="listbox"
                        aria-expanded="false"
                        onclick="window.devbox.toggleThemeDropdown()"
                    >
                        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" />
                        </svg>
                    </button>
                    <div id="theme-dropdown" class="theme-dropdown" role="listbox" aria-label="Select color theme"></div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main content -->
    <main class="max-w-4xl mx-auto px-4 py-6" id="main-content" aria-label="Main content">
        <div id="app">
            <div class="bg-card border-2 border-border rounded-lg p-6">
                <p class="text-muted-foreground">Loading...</p>
            </div>
        </div>
    </main>

    <!-- Toast container - ARIA live region for announcements -->
    <div id="toasts" class="toast-container" role="status" aria-live="polite" aria-atomic="true"></div>

    <!-- Modal container -->
    <!-- Confirm modal -->
    <div id="modal" class="modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="modal-title" aria-describedby="modal-message">
        <div class="modal-content" tabindex="-1">
            <h2 id="modal-title" class="modal-title"></h2>
            <p id="modal-message" class="modal-message"></p>
            <div class="modal-actions">
                <button id="modal-cancel" class="modal-btn modal-btn-secondary" type="button">Cancel</button>
                <button id="modal-confirm" class="modal-btn modal-btn-destructive" type="button">Confirm</button>
            </div>
        </div>
    </div>

    <!-- Input/prompt modal -->
    <div id="prompt-modal" class="modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="prompt-title">
        <div class="modal-content" tabindex="-1">
            <h2 id="prompt-title" class="modal-title"></h2>
            <div class="mb-4">
                <input type="text" id="prompt-input" class="w-full min-h-[44px] px-3 py-2 bg-background border-2 border-border rounded-md text-base text-foreground placeholder:text-placeholder focus:outline-hidden focus:ring-3 focus:ring-focus focus:border-primary" autocomplete="off">
            </div>
            <div class="modal-actions">
                <button id="prompt-cancel" class="modal-btn modal-btn-secondary" type="button">Cancel</button>
                <button id="prompt-confirm" class="modal-btn modal-btn-primary" type="button">OK</button>
            </div>
        </div>
    </div>

    <script type="module" src="js/app.js"></script>
</body>
</html>
